# NOTE: while you're working, also update `bin/kv.ts` to write integers as
# integers in the YAML, not strings, and handle anchors/references if it
# doesn't already. We don't want to WRITE anchors/references, but we should
# be able to READ them.

_anchors: # _anchors is for YAML anchor definitions only. Exclude from direct output.
  redirects: &redirects
    blog: https://blog.dave.io
    bluesky: https://bsky.app/profile/dave.io
    blit: https://notes.dave.io/blit
    bsky: https://dave.io/go/bluesky
    github: https://github.com/daveio
    fetlife: https://fetlife.com/users/22725
    facebook: https://facebook.com/dave.io
    cv: https://notes.dave.io/cv
    dreamwidth: https://daveio.dreamwidth.org
    gnupg: https://dave.io/go/key
    journal: https://dave.io/go/dreamwidth
    gpg: https://dave.io/go/key
    key: https://keyoxide.org/729A7FAAB95A78A7AAB70E06B22EFAE146E2BB7E
    instagram: https://instagram.com/daveio
    pillowfort: https://pillowfort.social/daveio
    linkedin: https://linkedin.com/in/dcwilliams
    mastodon: https://basilisk.gallery/@dave
    nerd-fonts: https://files.dave.io/nerd-fonts.zip
    pgp: https://dave.io/go/key
    sexmap: https://humansexmap.com/showmap.php?mapid=map521a7bd04ec217.96418626
    public-key: https://dave.io/go/key
    these-days: https://customer-scrk7cl14o51h5z9.cloudflarestream.com/80928e82f8196982e8fa4e83a509e622/watch
    soundcloud: https://soundcloud.com/davedotio
    radio: https://qrz.com/db/M6LNS
    threads: https://threads.com/@daveio
    wat: https://destroyallsoftware.com/talks/wat
    tumblr: https://tumblr.com/blog/daveio
    todo: https://daveio.notion.site/185b7795690c80399615eb0f5d5033c0
  sample_metrics: &sample_metrics # Shared metrics template
    # the `ok` and `error` counters should be usable to calculate total hits.
    # (ok + error) == (sum of visitor.*) == (sum of group.*) == (sum of status.*)
    ok: 0 # total hits which succeeded
    error: 0 # total hits which errored
    times: # all unix time, integer
      last-hit: 0
      last-error: 0
      last-ok: 0
    visitor: # hits by visitor type
      human: 0
      bot: 0
      unknown: 0
    group: # hits by response code group (1xx, 2xx, etc)
      1xx: 0
      2xx: 0
      3xx: 0
      4xx: 0
      5xx: 0
      # ... more groups as they occur
    status: # hits by specific response code
      304: 0
      404: 0
      307: 0
      405: 0
      500: 0
      # ... more status codes as they occur
metrics:
  resources:
    # these are the resources that are tracked, and their metrics.
    # a resource is `/api/ENDPOINT_NAME` and everything beneath.
    # for example the resource for `/api/internal/worker` is `internal`.
    # each resource should have its own section.
    go: # add `go` for `/go`, ie redirects. we previously excluded it
      <<: *sample_metrics
    internal:
      <<: *sample_metrics
    ai:
      <<: *sample_metrics
    # ... other resources
  redirect:
    wat:
      <<: *sample_metrics
    blog:
      <<: *sample_metrics
    # ... other redirects
  <<: *sample_metrics # shared counters for entire Worker including `/go`
redirect:
  <<: *redirects
